{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Alexandria/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{XIcon}from'./icons';import{withRouter}from'react-router-dom';import{app}from'../../firebase/index';import{BeatLoader}from'react-spinners';function BasketItem(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),imageUrl=_useState2[0],setImageUrl=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){var mounted=true;var storageRef=app.storage().ref();storageRef.child(\"\".concat(props.book.item.image)).getDownloadURL().then(function(url){if(mounted){setImageUrl(url);setLoading(false);}}).catch(function(){return props.history.push('/error');});return function(){mounted=false;};},[props.book.item.image,props.history]);if(loading){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(BeatLoader,{loading:true})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"book-in-basket\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){props.history.push(\"/book/\"+props.book.item.title);},children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"book-in-basket-info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:props.book.item.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",props.book.item.price,\" x \",props.book.quantity]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.removeItem(props.book.item._id);},children:/*#__PURE__*/_jsx(XIcon,{width:\"30\",height:\"30\"})})]})]},props.book.item._id);}export default withRouter(BasketItem);","map":{"version":3,"sources":["D:/Projects/Alexandria/client/src/components/partial/basketItem.jsx"],"names":["React","useState","useEffect","XIcon","withRouter","app","BeatLoader","BasketItem","props","imageUrl","setImageUrl","loading","setLoading","mounted","storageRef","storage","ref","child","book","item","image","getDownloadURL","then","url","catch","history","push","title","price","quantity","removeItem","_id"],"mappings":"4OAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,KAAR,KAAoB,SAApB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAAQC,GAAR,KAAkB,sBAAlB,CACA,OAAQC,UAAR,KAAyB,gBAAzB,CAEA,QAASC,CAAAA,UAAT,CAAoBC,KAApB,CAA0B,eACUP,QAAQ,CAAC,EAAD,CADlB,wCACfQ,QADe,eACLC,WADK,8BAEQT,QAAQ,CAAC,IAAD,CAFhB,yCAEfU,OAFe,eAENC,UAFM,eAItBV,SAAS,CAAC,UAAM,CACZ,GAAIW,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAMC,CAAAA,UAAU,CAAGT,GAAG,CAACU,OAAJ,GAAcC,GAAd,EAAnB,CACAF,UAAU,CAACG,KAAX,WAAoBT,KAAK,CAACU,IAAN,CAAWC,IAAX,CAAgBC,KAApC,GAA6CC,cAA7C,GACCC,IADD,CACM,SAACC,GAAD,CAAS,CACP,GAAGV,OAAH,CAAW,CACPH,WAAW,CAACa,GAAD,CAAX,CACAX,UAAU,CAAC,KAAD,CAAV,CACH,CACJ,CANL,EAQCY,KARD,CAQO,iBAAMhB,CAAAA,KAAK,CAACiB,OAAN,CAAcC,IAAd,CAAmB,QAAnB,CAAN,EARP,EAUA,MAAO,WAAM,CACTb,OAAO,CAAG,KAAV,CACH,CAFD,CAGH,CAjBQ,CAiBN,CAACL,KAAK,CAACU,IAAN,CAAWC,IAAX,CAAgBC,KAAjB,CAAwBZ,KAAK,CAACiB,OAA9B,CAjBM,CAAT,CAmBA,GAAGd,OAAH,CAAW,CACP,mBAAO,kCAAK,KAAC,UAAD,EAAY,OAAO,KAAnB,EAAL,EAAP,CACH,CAED,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,eAAQ,OAAO,CAAE,kBAAM,CAACH,KAAK,CAACiB,OAAN,CAAcC,IAAd,CAAmB,SAAWlB,KAAK,CAACU,IAAN,CAAWC,IAAX,CAAgBQ,KAA9C,EAAqD,CAA7E,uBACI,YAAK,GAAG,CAAElB,QAAV,CAAoB,GAAG,CAAC,EAAxB,EADJ,EADJ,cAII,aAAK,SAAS,CAAC,qBAAf,wBACI,oBAAKD,KAAK,CAACU,IAAN,CAAWC,IAAX,CAAgBQ,KAArB,EADJ,cAEI,yBAAKnB,KAAK,CAACU,IAAN,CAAWC,IAAX,CAAgBS,KAArB,OAA+BpB,KAAK,CAACU,IAAN,CAAWW,QAA1C,GAFJ,cAGI,eAAQ,OAAO,CAAE,yBAAMrB,CAAAA,KAAK,CAACsB,UAAN,CAAiBtB,KAAK,CAACU,IAAN,CAAWC,IAAX,CAAgBY,GAAjC,CAAN,EAAjB,uBAA8D,KAAC,KAAD,EAAO,KAAK,CAAC,IAAb,CAAkB,MAAM,CAAC,IAAzB,EAA9D,EAHJ,GAJJ,GAAqCvB,KAAK,CAACU,IAAN,CAAWC,IAAX,CAAgBY,GAArD,CADJ,CAYH,CAED,cAAe3B,CAAAA,UAAU,CAACG,UAAD,CAAzB","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {XIcon} from './icons';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {app} from '../../firebase/index';\r\nimport {BeatLoader} from 'react-spinners';\r\n\r\nfunction BasketItem(props){\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        let mounted = true;\r\n\r\n        const storageRef = app.storage().ref();\r\n        storageRef.child(`${props.book.item.image}`).getDownloadURL()\r\n        .then((url) => {\r\n                if(mounted){\r\n                    setImageUrl(url);\r\n                    setLoading(false);\r\n                }\r\n            }\r\n        )\r\n        .catch(() => props.history.push('/error'));\r\n\r\n        return () => {\r\n            mounted = false;\r\n        }\r\n    }, [props.book.item.image, props.history]);\r\n\r\n    if(loading){\r\n        return <div><BeatLoader loading/></div>;\r\n    }\r\n\r\n    return(\r\n        <div className=\"book-in-basket\" key={props.book.item._id}>\r\n            <button onClick={() => {props.history.push(\"/book/\" + props.book.item.title)}}>\r\n                <img src={imageUrl} alt=\"\"/>\r\n            </button>\r\n            <div className=\"book-in-basket-info\">\r\n                <h2>{props.book.item.title}</h2>\r\n                <p>${props.book.item.price} x {props.book.quantity}</p>\r\n                <button onClick={() => props.removeItem(props.book.item._id)}><XIcon width=\"30\" height=\"30\" /></button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withRouter(BasketItem);"]},"metadata":{},"sourceType":"module"}