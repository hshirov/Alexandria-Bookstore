{"ast":null,"code":"import _regeneratorRuntime from\"D:/Projects/Alexandria/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Projects/Alexandria/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Projects/Alexandria/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{app}from'../../firebase/index';import{toast}from'react-toastify';import Axios from'axios';function Add(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),author=_useState6[0],setAuthor=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),genre=_useState8[0],setGenre=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),price=_useState10[0],setPrice=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),publishedDate=_useState12[0],setPublishedDate=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),description=_useState14[0],setDescription=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),availability=_useState16[0],setAvailability=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),featured=_useState18[0],setFeatured=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),alerts=_useState20[0],setAlerts=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),genres=_useState22[0],setGenres=_useState22[1];toast.configure();useEffect(function(){var mounted=true;Axios.get('http://localhost:8000/api/genres/getAll',{withCredentials:true}).then(function(res){if(mounted){var requestedGenres=res.data;setGenres(requestedGenres);}}).catch(function(){props.history.push('/error');});return function(){mounted=false;};},[props.history]);var handleChange=function handleChange(event){var img=event.target.files[0];setImage(img);};// Accessing firebase is done client-side\nvar uploadImage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var storageRef,imageName,fileRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return app.storage().ref();case 2:storageRef=_context.sent;imageName=title+' - '+author;_context.next=6;return storageRef.child(imageName);case 6:fileRef=_context.sent;_context.next=9;return fileRef.put(image);case 9:case\"end\":return _context.stop();}}},_callee);}));return function uploadImage(){return _ref.apply(this,arguments);};}();var handleSubmit=function handleSubmit(event){event.preventDefault();var imageName=title+' - '+author;Axios.post('http://localhost:8000/api/admin/add',{title:title,author:author,genre:genre,price:price,publishedDate:publishedDate,description:description,availability:availability,featured:featured,image:imageName},{withCredentials:true}).then(function(res){var errors=res.data.errors;if(errors.length>0&&errors[0].msg==='Succesfully created'){setAlerts([]);uploadImage();toast.success(\"Book added!\",{position:toast.POSITION.BOTTOM_RIGHT,pauseOnHover:false,autoClose:2000});setTimeout(function(){return window.location.reload();},2000);}else{setAlerts(errors);}}).catch(function(){props.history.push('/error');});};var isInputNumber=function isInputNumber(event){var ch=String.fromCharCode(event.which);if(!/[0-9]/.test(ch)){event.preventDefault();}};var alertsList=alerts.map(function(elem){return/*#__PURE__*/_jsx(\"div\",{className:\"alert\",role:\"alert\",children:elem.msg},elem.msg);});var genreOptions=genres.map(function(genre){return/*#__PURE__*/_jsx(\"option\",{value:genre.name,children:genre.name},genre.name);});return/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"form-admin\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"admin-add-title\",children:\"Add a new book\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"title\",placeholder:\"*Title\",maxLength:\"255\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"author\",placeholder:\"*Author\",value:author,maxLength:\"255\",onChange:function onChange(e){return setAuthor(e.target.value);}}),/*#__PURE__*/_jsxs(\"select\",{className:\"genre-dropdown\",value:genre,onChange:function onChange(e){return setGenre(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,defaultValue:true,children:\"Select genre\"}),genreOptions]}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",name:\"description\",placeholder:\"Description\",maxLength:\"255\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"price\",min:\"1\",max:\"999\",placeholder:\"*Price in dollars\",maxLength:\"5\",value:price,onChange:function onChange(e){return setPrice(e.target.value);},onKeyPress:function onKeyPress(e){return isInputNumber(e);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"publishedDate\",placeholder:\"Published Date\",maxLength:\"255\",value:publishedDate,onChange:function onChange(e){return setPublishedDate(e.target.value);}}),/*#__PURE__*/_jsxs(\"div\",{className:\"drain\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"availability\",name:\"availability\",checked:availability,onChange:function onChange(){return setAvailability(!availability);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"availability\",children:\"Is available\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"featured\",name:\"featured\",checked:featured,onChange:function onChange(){return setFeatured(!featured);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"featured\",children:\"Featured on home page\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",children:\"Select book cover image:\"}),/*#__PURE__*/_jsx(\"input\",{id:\"file\",type:\"file\",onChange:function onChange(e){return handleChange(e);}}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:function onClick(e){return handleSubmit(e);},style:{display:image?'':'none'},children:\"Add\"}),alertsList]}),/*#__PURE__*/_jsx(\"button\",{className:\"admin-back-button\",onClick:function onClick(){return props.history.push('/admin');},children:\"Back to admin panel\"})]});}export default Add;","map":{"version":3,"sources":["D:/Projects/Alexandria/client/src/components/admin/add.jsx"],"names":["React","useState","useEffect","app","toast","Axios","Add","props","image","setImage","title","setTitle","author","setAuthor","genre","setGenre","price","setPrice","publishedDate","setPublishedDate","description","setDescription","availability","setAvailability","featured","setFeatured","alerts","setAlerts","genres","setGenres","configure","mounted","get","withCredentials","then","res","requestedGenres","data","catch","history","push","handleChange","event","img","target","files","uploadImage","storage","ref","storageRef","imageName","child","fileRef","put","handleSubmit","preventDefault","post","errors","length","msg","success","position","POSITION","BOTTOM_RIGHT","pauseOnHover","autoClose","setTimeout","window","location","reload","isInputNumber","ch","String","fromCharCode","which","test","alertsList","map","elem","genreOptions","name","e","value","display"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {app} from '../../firebase/index';\r\nimport {toast} from 'react-toastify';\r\nimport Axios from 'axios';\r\n\r\nfunction Add(props){\r\n    const [image, setImage] = useState(null);\r\n    const [title, setTitle] = useState('');\r\n    const [author, setAuthor] = useState('');\r\n    const [genre, setGenre] = useState('');\r\n    const [price, setPrice] = useState('');\r\n    const [publishedDate, setPublishedDate] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [availability, setAvailability] = useState(true);\r\n    const [featured, setFeatured] = useState(false);\r\n    const [alerts, setAlerts] = useState([]);\r\n    const [genres, setGenres] = useState([]);\r\n    toast.configure();\r\n\r\n    useEffect(() => {\r\n        let mounted = true;\r\n\r\n        Axios.get('http://localhost:8000/api/genres/getAll', {withCredentials: true})\r\n        .then(res => {\r\n            if(mounted){\r\n                const requestedGenres = res.data;\r\n                setGenres(requestedGenres);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            props.history.push('/error');\r\n        });\r\n\r\n        return () => {\r\n            mounted = false;\r\n        }\r\n    }, [props.history]);\r\n\r\n    const handleChange = event => {\r\n        const img = event.target.files[0];\r\n        setImage(img);\r\n    }\r\n\r\n    // Accessing firebase is done client-side\r\n    const uploadImage = async () => {\r\n        const storageRef = await app.storage().ref();\r\n        const imageName = title + ' - ' + author;\r\n        const fileRef = await storageRef.child(imageName);\r\n        await fileRef.put(image);\r\n    }\r\n\r\n    const handleSubmit = (event) => {\r\n        event.preventDefault();\r\n        const imageName = title + ' - ' + author;\r\n        Axios.post('http://localhost:8000/api/admin/add', {title: title, author: author, genre: genre, price: price, \r\n        publishedDate: publishedDate, description: description, availability: availability, featured: featured, image: imageName}, {withCredentials: true})\r\n        .then(res => {\r\n            const errors = res.data.errors;\r\n            if(errors.length > 0 && errors[0].msg === 'Succesfully created'){\r\n                setAlerts([]);                               \r\n                uploadImage();\r\n                toast.success(\"Book added!\", {position: toast.POSITION.BOTTOM_RIGHT, pauseOnHover: false, autoClose: 2000});\r\n                setTimeout(() => window.location.reload(), 2000);\r\n            }else{\r\n                setAlerts(errors);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            props.history.push('/error');\r\n        });\r\n    }\r\n\r\n    const isInputNumber = (event) => {\r\n        const ch = String.fromCharCode(event.which);\r\n        if(!(/[0-9]/.test(ch))){\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    const alertsList = alerts.map(elem => {return <div className=\"alert\" role=\"alert\" key={elem.msg}>{elem.msg}</div>});\r\n    const genreOptions = genres.map(genre => {return <option value={genre.name} key={genre.name}>{genre.name}</option>}); \r\n\r\n    return(\r\n        <div className=\"form-container\">        \r\n            <form className=\"form-admin\">\r\n                <h1 className=\"admin-add-title\">Add a new book</h1>\r\n                <input type=\"text\" name=\"title\" placeholder=\"*Title\" maxLength=\"255\" value={title} onChange={(e) => setTitle(e.target.value)}/>\r\n                <input type=\"text\" name=\"author\" placeholder=\"*Author\" value={author} maxLength=\"255\" onChange={(e) => setAuthor(e.target.value)}/>\r\n                <select className=\"genre-dropdown\" value={genre} onChange={(e) => setGenre(e.target.value)}>\r\n                    <option value=\"\" disabled defaultValue>Select genre</option>\r\n                    {genreOptions}\r\n                </select>\r\n                <textarea type=\"text\" name=\"description\" placeholder=\"Description\" maxLength=\"255\" value={description} onChange={(e) => setDescription(e.target.value)}/>\r\n                <input type=\"text\" name=\"price\" min=\"1\" max=\"999\" placeholder=\"*Price in dollars\" maxLength=\"5\" value={price} onChange={(e) => setPrice(e.target.value)} onKeyPress={(e) => isInputNumber(e)}/>\r\n                <input type=\"text\" name=\"publishedDate\" placeholder=\"Published Date\" maxLength=\"255\" value={publishedDate} onChange={(e) => setPublishedDate(e.target.value)}/>\r\n                <div className=\"drain\">\r\n                    <input type=\"checkbox\" id=\"availability\" name=\"availability\" checked={availability} onChange={() => setAvailability(!availability)} />\r\n                    <label htmlFor=\"availability\">Is available</label><br/>\r\n                    <input type=\"checkbox\" id=\"featured\" name=\"featured\" checked={featured} onChange={() => setFeatured(!featured)} />\r\n                    <label htmlFor=\"featured\">Featured on home page</label><br/>\r\n                    <label htmlFor=\"file\">Select book cover image:</label>\r\n                    <input id=\"file\" type=\"file\" onChange={(e) => handleChange(e)}/><br/>\r\n                </div>     \r\n                <button className=\"submit-button\" onClick={(e) => handleSubmit(e)} style={{display: image ? '' : 'none'}}>Add</button>\r\n                {alertsList}\r\n            </form>\r\n            <button className=\"admin-back-button\" onClick={() => props.history.push('/admin')}>Back to admin panel</button>      \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Add;"]},"metadata":{},"sourceType":"module"}