{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Alexandria/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import Axios from'axios';import{withRouter}from'react-router-dom';import{LogOutIcon,BasketIcon}from'./icons';import'../../css/header.css';function Header(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAdmin=_useState4[0],setIsAdmin=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];useEffect(function(){var mounted=true;Axios.get('http://localhost:8000/api/checkAuthentication',{withCredentials:true}).then(function(result){if(mounted){if(result.data){setIsLoggedIn(result.data);Axios.get('http://localhost:8000/api/checkAdminAuthentication',{withCredentials:true}).then(function(data){setIsAdmin(data.data);setLoading(false);});}else{setIsAdmin(false);setLoading(false);}}}).catch(function(){return props.history.push('/error');});return function(){mounted=false;};},[props.history]);var logOut=function logOut(){Axios.get('http://localhost:8000/api/logout',{withCredentials:true}).then(function(result){props.history.push(result.data);setIsLoggedIn(false);}).catch(function(){props.history.push('/error');});};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(\"div\",{className:\"logo\",onClick:function onClick(){return props.history.push('/');},children:/*#__PURE__*/_jsx(\"p\",{children:\"Alexandria\"})})});}if(isLoggedIn){return/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",onClick:function onClick(){return props.history.push('/');},children:/*#__PURE__*/_jsx(\"p\",{children:\"Alexandria\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"log\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"basket-button\",title:\"Basket\",onClick:function onClick(){return props.history.push('/basket');},children:/*#__PURE__*/_jsx(BasketIcon,{width:\"20\",height:\"20\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"log-out-button\",title:\"Log Out\",onClick:logOut,children:/*#__PURE__*/_jsx(LogOutIcon,{width:\"20\",height:\"20\"})}),/*#__PURE__*/_jsx(\"button\",{style:{display:isAdmin?'':'none'},onClick:function onClick(){props.history.push('/admin');window.location.reload();},children:\"Admin panel\"})]})]});}// If not logged in\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",onClick:function onClick(){return props.history.push('/');},children:/*#__PURE__*/_jsx(\"p\",{children:\"Alexandria\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"log\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"basket-button\",title:\"Basket\",onClick:function onClick(){return props.history.push('/basket');},children:/*#__PURE__*/_jsx(BasketIcon,{width:\"20\",height:\"20\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return props.history.push('/login');},children:\"Login\"})]})]});}export default withRouter(Header);","map":{"version":3,"sources":["D:/Projects/Alexandria/client/src/components/partial/header.jsx"],"names":["React","useState","useEffect","Axios","withRouter","LogOutIcon","BasketIcon","Header","props","isLoggedIn","setIsLoggedIn","isAdmin","setIsAdmin","loading","setLoading","mounted","get","withCredentials","then","result","data","catch","history","push","logOut","display","window","location","reload"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport Axios from 'axios';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {LogOutIcon, BasketIcon} from './icons';\r\nimport '../../css/header.css';\r\n\r\nfunction Header(props){\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n    const [isAdmin, setIsAdmin] = useState(false);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        let mounted = true;\r\n\r\n        Axios.get('http://localhost:8000/api/checkAuthentication', { withCredentials: true })\r\n        .then(result => {\r\n            if(mounted){\r\n                if(result.data){\r\n                    setIsLoggedIn(result.data);\r\n                    Axios.get('http://localhost:8000/api/checkAdminAuthentication', { withCredentials: true })\r\n                    .then(data => {\r\n                        setIsAdmin(data.data);\r\n                        setLoading(false);\r\n                    });\r\n                }else{\r\n                    setIsAdmin(false);\r\n                    setLoading(false);\r\n                }\r\n            }\r\n        })\r\n        .catch(() => props.history.push('/error'));\r\n\r\n        return () => {\r\n            mounted = false;\r\n        }\r\n    }, [props.history]);\r\n\r\n    const logOut = () => {\r\n        Axios.get('http://localhost:8000/api/logout', { withCredentials: true })\r\n        .then(result => {\r\n            props.history.push(result.data);\r\n            setIsLoggedIn(false);\r\n        })\r\n        .catch(() => {\r\n            props.history.push('/error');\r\n        });\r\n    }\r\n\r\n    if(loading){\r\n        return(\r\n            <div className=\"header\">\r\n                <div className=\"logo\" onClick={() => props.history.push('/')}><p>Alexandria</p></div>       \r\n            </div>\r\n        );\r\n    }\r\n\r\n    if(isLoggedIn){\r\n        return(\r\n            <div className=\"header\">\r\n                <div className=\"logo\" onClick={() => props.history.push('/')}><p>Alexandria</p></div> \r\n                <div className=\"log\">\r\n                    <button className=\"basket-button\" title=\"Basket\" onClick={() => props.history.push('/basket')}>\r\n                        <BasketIcon width=\"20\" height=\"20\" />\r\n                    </button>             \r\n                    <button className=\"log-out-button\" title=\"Log Out\" onClick={logOut}>\r\n                        <LogOutIcon width=\"20\" height=\"20\" />\r\n                    </button>\r\n                    <button style={{display: isAdmin ? '' : 'none'}} onClick={() => {props.history.push('/admin'); window.location.reload()}}>Admin panel</button>\r\n                </div>       \r\n            </div>\r\n        );\r\n    }\r\n\r\n    // If not logged in\r\n    return(\r\n        <div className=\"header\">\r\n            <div className=\"logo\" onClick={() => props.history.push('/')}><p>Alexandria</p></div>\r\n            <div className=\"log\">\r\n                <button className=\"basket-button\" title=\"Basket\" onClick={() => props.history.push('/basket')}>\r\n                    <BasketIcon width=\"20\" height=\"20\" />\r\n                </button>\r\n                <button onClick={() => props.history.push('/login')}>Login</button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withRouter(Header);"]},"metadata":{},"sourceType":"module"}