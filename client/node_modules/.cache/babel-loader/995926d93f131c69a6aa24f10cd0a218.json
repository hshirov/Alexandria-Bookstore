{"ast":null,"code":"import _slicedToArray from\"D:/Projects/Alexandria/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from'react';import{XIcon}from'../../partial/icons';import{withRouter}from'react-router-dom';import{app}from'../../../firebase/index';import{BeatLoader}from'react-spinners';function Book(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),imageUrl=_useState2[0],setImageUrl=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];useEffect(function(){var mounted=true;if(mounted){var storageRef=app.storage().ref();storageRef.child(\"\".concat(props.book.image)).getDownloadURL().then(function(url){setImageUrl(url);setLoading(false);}).catch(function(){return props.history.push('/error');});}return function(){mounted=false;};},[props.book.image,props.history]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-container\",children:/*#__PURE__*/_jsx(BeatLoader,{loading:true})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"book-item\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container\",children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){props.history.push(\"/admin/book/\"+props.book.title);},children:/*#__PURE__*/_jsx(\"img\",{src:imageUrl,alt:\"\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"description-container\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"book-title\",children:props.book.title}),/*#__PURE__*/_jsx(\"h3\",{className:\"book-author\",children:props.book.author}),/*#__PURE__*/_jsx(\"button\",{className:\"book-add-to-basket\",title:\"Remove\",onClick:function onClick(){props.remove(props.book._id,props.book.image);},children:/*#__PURE__*/_jsx(XIcon,{width:\"30\",height:\"30\"})})]})]},props.book._id);}export default withRouter(Book);","map":{"version":3,"sources":["D:/Projects/Alexandria/client/src/components/admin/partial/book.jsx"],"names":["React","useState","useEffect","XIcon","withRouter","app","BeatLoader","Book","props","imageUrl","setImageUrl","loading","setLoading","mounted","storageRef","storage","ref","child","book","image","getDownloadURL","then","url","catch","history","push","title","author","remove","_id"],"mappings":"4OAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,OAAQC,KAAR,KAAoB,qBAApB,CACA,OAAQC,UAAR,KAAyB,kBAAzB,CACA,OAAQC,GAAR,KAAkB,yBAAlB,CACA,OAAQC,UAAR,KAAyB,gBAAzB,CAEA,QAASC,CAAAA,IAAT,CAAcC,KAAd,CAAoB,eACgBP,QAAQ,CAAC,EAAD,CADxB,wCACTQ,QADS,eACCC,WADD,8BAEcT,QAAQ,CAAC,IAAD,CAFtB,yCAETU,OAFS,eAEAC,UAFA,eAIhBV,SAAS,CAAC,UAAM,CACZ,GAAIW,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAGA,OAAH,CAAW,CACP,GAAMC,CAAAA,UAAU,CAAGT,GAAG,CAACU,OAAJ,GAAcC,GAAd,EAAnB,CACAF,UAAU,CAACG,KAAX,WAAoBT,KAAK,CAACU,IAAN,CAAWC,KAA/B,GAAwCC,cAAxC,GACCC,IADD,CACM,SAAAC,GAAG,CAAI,CACLZ,WAAW,CAACY,GAAD,CAAX,CACAV,UAAU,CAAC,KAAD,CAAV,CACH,CAJL,EAMCW,KAND,CAMO,iBAAMf,CAAAA,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,QAAnB,CAAN,EANP,EAOH,CAED,MAAO,WAAM,CACTZ,OAAO,CAAG,KAAV,CACH,CAFD,CAGH,CAjBQ,CAiBN,CAACL,KAAK,CAACU,IAAN,CAAWC,KAAZ,CAAmBX,KAAK,CAACgB,OAAzB,CAjBM,CAAT,CAmBA,GAAGb,OAAH,CAAW,CACP,mBAAO,YAAK,SAAS,CAAC,mBAAf,uBAAmC,KAAC,UAAD,EAAY,OAAO,KAAnB,EAAnC,EAAP,CACH,CAED,mBACI,aAAK,SAAS,CAAC,WAAf,wBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,eAAQ,OAAO,CAAE,kBAAM,CAACH,KAAK,CAACgB,OAAN,CAAcC,IAAd,CAAmB,eAAiBjB,KAAK,CAACU,IAAN,CAAWQ,KAA/C,EAAsD,CAA9E,uBACI,YAAK,GAAG,CAAEjB,QAAV,CAAoB,GAAG,CAAC,EAAxB,EADJ,EADJ,EADJ,cAMI,aAAK,SAAS,CAAC,uBAAf,wBACI,WAAI,SAAS,CAAC,YAAd,UAA4BD,KAAK,CAACU,IAAN,CAAWQ,KAAvC,EADJ,cAEI,WAAI,SAAS,CAAC,aAAd,UAA6BlB,KAAK,CAACU,IAAN,CAAWS,MAAxC,EAFJ,cAGI,eAAQ,SAAS,CAAC,oBAAlB,CAAuC,KAAK,CAAC,QAA7C,CAAsD,OAAO,CAAE,kBAAM,CAACnB,KAAK,CAACoB,MAAN,CAAapB,KAAK,CAACU,IAAN,CAAWW,GAAxB,CAA6BrB,KAAK,CAACU,IAAN,CAAWC,KAAxC,EAA+C,CAArH,uBACI,KAAC,KAAD,EAAO,KAAK,CAAC,IAAb,CAAkB,MAAM,CAAC,IAAzB,EADJ,EAHJ,GANJ,GAAgCX,KAAK,CAACU,IAAN,CAAWW,GAA3C,CADJ,CAgBH,CAED,cAAezB,CAAAA,UAAU,CAACG,IAAD,CAAzB","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport {XIcon} from '../../partial/icons';\r\nimport {withRouter} from 'react-router-dom';\r\nimport {app} from '../../../firebase/index';\r\nimport {BeatLoader} from 'react-spinners';\r\n\r\nfunction Book(props){\r\n    const [imageUrl, setImageUrl] = useState('');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        let mounted = true;\r\n\r\n        if(mounted){\r\n            const storageRef = app.storage().ref();\r\n            storageRef.child(`${props.book.image}`).getDownloadURL()\r\n            .then(url => {\r\n                    setImageUrl(url);\r\n                    setLoading(false);\r\n                }\r\n            )\r\n            .catch(() => props.history.push('/error'));\r\n        }\r\n        \r\n        return () => {\r\n            mounted = false;\r\n        }\r\n    }, [props.book.image, props.history]);\r\n\r\n    if(loading){\r\n        return <div className=\"loading-container\"><BeatLoader loading/></div>;\r\n    }\r\n\r\n    return(\r\n        <div className=\"book-item\" key={props.book._id}>\r\n            <div className=\"image-container\">\r\n                <button onClick={() => {props.history.push(\"/admin/book/\" + props.book.title)}}>\r\n                    <img src={imageUrl} alt=\"\"/>\r\n                </button>\r\n            </div>\r\n            <div className=\"description-container\">\r\n                <h2 className=\"book-title\">{props.book.title}</h2>\r\n                <h3 className=\"book-author\">{props.book.author}</h3>\r\n                <button className=\"book-add-to-basket\" title=\"Remove\" onClick={() => {props.remove(props.book._id, props.book.image)}}>\r\n                    <XIcon width=\"30\" height=\"30\"/>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withRouter(Book);"]},"metadata":{},"sourceType":"module"}